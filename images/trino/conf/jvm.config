-server
-agentpath:/usr/lib/trino/bin/libjvmkill.so

# Minimal memory settings for 6144MB system
-Xmx256m
-Xms128m

# G1GC settings optimized for very small heap
-XX:+UseG1GC
-XX:G1HeapRegionSize=4M
-XX:MaxGCPauseMillis=50

# Memory management
-XX:+ExplicitGCInvokesConcurrent
-XX:+HeapDumpOnOutOfMemoryError
-XX:+ExitOnOutOfMemoryError
-XX:-OmitStackTraceInFastThrow

# Minimal code cache
-XX:ReservedCodeCacheSize=32M

# Compilation optimizations
-XX:PerMethodRecompilationCutoff=10000
-XX:PerBytecodeRecompilationCutoff=10000

# System settings
-Djdk.attach.allowAttachSelf=true
-Djdk.nio.maxCachedBufferSize=250000
-Dfile.encoding=UTF-8

# Allow loading dynamic agent used by JOL
-XX:+EnableDynamicAgentLoading
